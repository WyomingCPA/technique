import{_ as w,h as _,a as u,r,o as f,i as B,w as c,e as a,b as m,c as b,j as S,t as h,F as U,f as g}from"./index.dccdd8c0.js";import{d as O}from"./debounce.87e5ba27.js";import{q as L}from"./index.3046ca4e.js";const E={name:"ProductAll",components:{},data(){const e=["samsung","realme","Xiaomi","Tecno","BQ"],t=_(""),l=_([]),i=[],o="",n=[{key:"price",sortable:!0},{key:"name",sortable:!0},{key:"count_learn",sortable:!0,width:20},{key:"actions",width:80},{key:"isFavorite",width:50,sortable:!0}],p=[{text:"asc",value:"asc"},{text:"desc",value:"desc"},{text:"no sorting",value:null}];return{value:[5e3,8e4],min:5e3,max:1e5,loading:!1,options:e,singleSelect:t,multiSelect:l,items:i,columns:n,input:o,filter:o,isDebounceInput:!1,isCustomFilteringFn:!1,filteredCount:i.length,listPrice:Array,sortBy:"isFavorite",sortingOrder:"desc",sortingOrderOptions:p,serverParams:{priceMin:"",priceMax:""}}},methods:{updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},sliderChange(){console.log(this.value),this.updateParams({priceMin:this.value[0],priceMax:this.value[1]}),this.getProduct()},processTrackLabel(e,t){return t===0?`min ${e} \u0440\u0443\u0431`:`max ${e} \u0440\u0443\u0431`},filterExact(e){var t;return this.filter===""?!0:(console.log(filter),((t=e==null?void 0:e.toString)==null?void 0:t.call(e))===this.filter)},updateFilter(e){this.filter=e},debouncedUpdateFilter:O(function(e){this.updateFilter(e)},600),filterPrice:function(e){this.filter=e,this.input=e},setLearn(e){this.loading=!0,this.idProduct=e,console.log(e);let t=this;u.get("/sanctum/csrf-cookie").then(l=>{u.post("/api/product/set-learn",{id_product:t.idProduct}).then(i=>{i.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.getProduct(),this.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(i.status),this.loading=!1)}).catch(function(i){console.log(l),console.error(i),this.loading=!1})})},getProduct(){let e=this;u.get("/sanctum/csrf-cookie").then(t=>{u.request({method:"post",url:"/api/product/smart",params:e.serverParams,paramsSerializer:l=>L.stringify(l)}).then(l=>{e.items=l.data.products,e.listPrice=l.data.price;let i=[];Object.keys(e.listPrice).forEach(function(o,n,p){console.log(o),i.push(parseInt(o))}),e.min=Math.min(...i),e.max=Math.max(...i),console.log(e.value)}).catch(l=>{console.error(l)})})},setFavorite(e,t){this.loading=!0,this.idProduct=e,this.isFavor=t,console.log(e);let l=this;u.get("/sanctum/csrf-cookie").then(i=>{u.post("/api/product/set-favorite",{id_product:l.idProduct,is_favorite:l.isFavor}).then(o=>{o.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.getProduct(),this.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(o.status),this.loading=!1)}).catch(function(o){console.log(i),console.error(o),this.loading=!1})})},resetInfoModal(){this.infoModal.title="",this.infoModal.content=""},async handleSubmit(){let e=this;u.get("/sanctum/csrf-cookie").then(t=>{u.post("/api/group/set-subscriber",{count_subscriber:this.countSubscriber,id_group:e.idGroup}).then(l=>{l.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.getGroups(),this.$refs["my-modal"].hide()):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(l.status))}).catch(function(l){console.log(t),console.error(l)})})},sortByOptions(){return this.columns.map(({name:e,key:t,sortable:l})=>l&&(e||t)).filter(Boolean)}},computed:{customFilteringFn(){return this.isCustomFilteringFn?this.filterExact:void 0}},watch:{input(e){this.isDebounceInput?this.debouncedUpdateFilter(e):this.updateFilter(e)}},mounted:function(){this.updateParams({priceMin:this.value[0],priceMax:this.value[1]}),this.getProduct()}},I={class:"row"},N={class:"row"},T={class:"flex flex-wrap gap-6 mb-6 pt-6"},j=["onClick"],q={class:"flex flex-wrap gap-6 mb-6"},A={class:"row"},G=g("\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u043B"),z=g(" Number of filtered items: ");function Q(e,t,l,i,o,n){const p=r("va-input"),v=r("VaCounter"),F=r("VaSlider"),k=r("va-button"),x=r("va-switch"),P=r("va-data-table"),C=r("va-chip"),V=r("va-alert"),y=r("va-card-content"),M=r("va-card");return f(),B(M,null,{default:c(()=>[a(y,null,{default:c(()=>[m("div",I,[a(p,{modelValue:o.input,"onUpdate:modelValue":t[0]||(t[0]=s=>o.input=s),placeholder:"Filter...",class:"w-full"},null,8,["modelValue"])]),m("div",N,[m("div",T,[(f(!0),b(U,null,S(o.listPrice,(s,d)=>(f(),b("span",{key:d},[m("a",{href:"#",onClick:X=>n.filterPrice(d)},h(d)+"("+h(s)+") ",9,j)]))),128))])]),m("div",q,[a(F,{onChange:t[5]||(t[5]=s=>n.sliderChange()),modelValue:o.value,"onUpdate:modelValue":t[6]||(t[6]=s=>o.value=s),step:1e3,min:5e3,max:1e5,class:"mb-6",range:"","track-label-visible":"","track-label":n.processTrackLabel},{prepend:c(()=>[a(v,{"manual-input":"",onChange:t[1]||(t[1]=s=>n.sliderChange()),step:1e3,modelValue:o.value[0],"onUpdate:modelValue":t[2]||(t[2]=s=>o.value[0]=s),min:5e3,max:1e5},null,8,["modelValue"])]),append:c(()=>[a(v,{"manual-input":"",onChange:t[3]||(t[3]=s=>n.sliderChange()),step:1e3,modelValue:o.value[1],"onUpdate:modelValue":t[4]||(t[4]=s=>o.value[1]=s),min:5e3,max:1e5},null,8,["modelValue"])]),_:1},8,["modelValue","track-label"])]),m("div",A,[a(P,{items:o.items,columns:o.columns,filter:o.filter,"filter-method":n.customFilteringFn,"sort-by":o.sortBy,"onUpdate:sort-by":t[7]||(t[7]=s=>o.sortBy=s),"sorting-order":o.sortingOrder,"onUpdate:sorting-order":t[8]||(t[8]=s=>o.sortingOrder=s),onFiltered:t[9]||(t[9]=s=>o.filteredCount=s.items.length)},{"cell(actions)":c(({rowData:s})=>[a(k,{onClick:d=>n.setLearn(s.id)},{default:c(()=>[G]),_:2},1032,["onClick"])]),"cell(isFavorite)":c(({rowData:s})=>[a(x,{modelValue:s.isFavorite,"onUpdate:modelValue":d=>s.isFavorite=d,onClick:d=>n.setFavorite(s.id,s.isFavorite)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:1},8,["items","columns","filter","filter-method","sort-by","sorting-order"])]),a(V,{class:"!mt-6",color:"info",outline:""},{default:c(()=>[z,a(C,null,{default:c(()=>[g(h(o.filteredCount),1)]),_:1})]),_:1})]),_:1})]),_:1})}var K=w(E,[["render",Q]]);export{K as default};
