import{_ as w,v as u,x as a,o as p,y as U,w as n,f as c,b as d,c as v,e as M,t as f,F as I,j as m}from"./index.712643e1.js";import{d as L}from"./debounce.93109201.js";const B={name:"ProductAll",components:{},data(){const t=[],e="";return{infoModal:{id:"info-modal",title:"",content:""},value:!0,items:t,columns:[{key:"id",width:20},{key:"name",sortable:!0,width:20},{key:"price",sortable:!0,width:20},{key:"count_learn",sortable:!0,width:20},{key:"actions",width:80},{key:"favorite",width:50}],input:e,filter:e,isDebounceInput:!1,isCustomFilteringFn:!1,filteredCount:t.length,listPrice:Array}},methods:{filterExact(t){var e;return this.filter===""?!0:((e=t==null?void 0:t.toString)==null?void 0:e.call(t))===this.filter},updateFilter(t){this.filter=t},debouncedUpdateFilter:L(function(t){this.updateFilter(t)},600),filterPrice:function(t){this.filter=t,this.input=t},setLearn(t){this.loading=!0,this.idProduct=t,console.log(t);let e=this;u.get("/sanctum/csrf-cookie").then(l=>{u.post("/api/product/set-learn",{id_product:e.idProduct}).then(r=>{r.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.getWashProduct(),this.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(r.status),this.loading=!1)}).catch(function(r){console.log(l),console.error(r),this.loading=!1})})},setFavorite(t,e){this.loading=!0,this.idProduct=t,this.isFavor=e,console.log(t);let l=this;u.get("/sanctum/csrf-cookie").then(r=>{u.post("/api/product/set-favorite",{id_product:l.idProduct,is_favorite:l.isFavor}).then(i=>{i.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.getWashProduct(),this.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(i.status),this.loading=!1)}).catch(function(i){console.log(r),console.error(i),this.loading=!1})})},getWashProduct(){let t=this;u.get("/api/product/favorite").then(function(e){t.items=e.data.products,t.listPrice=e.data.price,console.log(e.data.groups)}).catch(function(e){console.error(e)})},resetInfoModal(){this.infoModal.title="",this.infoModal.content=""},async handleSubmit(){let t=this;u.get("/sanctum/csrf-cookie").then(e=>{u.post("/api/group/set-subscriber",{count_subscriber:this.countSubscriber,id_group:t.idGroup}).then(l=>{l.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.getGroups(),this.$refs["my-modal"].hide()):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(l.status))}).catch(function(l){console.log(e),console.error(l)})})}},computed:{customFilteringFn(){return this.isCustomFilteringFn?this.filterExact:void 0}},watch:{input(t){this.isDebounceInput?this.debouncedUpdateFilter(t):this.updateFilter(t)}},mounted:function(){this.getWashProduct()}},N={class:"grid md:grid-cols-2 gap-6 mb-6"},S={class:"flex flex-col gap-6"},W={class:"flex flex-wrap gap-6 mb-6"},D=["onClick"],T=["href"],A={class:"flex gap-2"},E=["innerHTML"],G=m("\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u043B"),H=m(" Number of filtered items: ");function K(t,e,l,r,i,h){const b=a("va-input"),_=a("va-checkbox"),g=a("va-button"),F=a("va-switch"),k=a("va-data-table"),C=a("va-chip"),x=a("va-alert"),y=a("va-card-content"),V=a("va-card");return p(),U(V,null,{default:n(()=>[c(y,null,{default:n(()=>[d("div",N,[c(b,{modelValue:i.input,"onUpdate:modelValue":e[0]||(e[0]=o=>i.input=o),placeholder:"Filter...",class:"w-full"},null,8,["modelValue"]),d("div",S,[c(_,{modelValue:i.isCustomFilteringFn,"onUpdate:modelValue":e[1]||(e[1]=o=>i.isCustomFilteringFn=o),label:"Use custom filtering function (looks for an exact match)"},null,8,["modelValue"]),c(_,{modelValue:i.isDebounceInput,"onUpdate:modelValue":e[2]||(e[2]=o=>i.isDebounceInput=o),label:"Debounce input"},null,8,["modelValue"])])]),d("div",W,[(p(!0),v(I,null,M(i.listPrice,(o,s)=>(p(),v("span",{key:s},[d("a",{href:"#",onClick:P=>h.filterPrice(s)},f(s)+"("+f(o)+") ",9,D)]))),128))]),c(k,{items:i.items,columns:i.columns,filter:i.filter,"filter-method":h.customFilteringFn,onFiltered:e[3]||(e[3]=o=>i.filteredCount=o.items.length)},{"cell(id)":n(({rowData:o})=>[d("a",{target:"_blank",href:"edit/"+o.id},f(o.id),9,T)]),"cell(name)":n(({row:o,isExpanded:s})=>[c(g,{onClick:P=>o.toggleRowDetails(),icon:s?"va-arrow-up":"va-arrow-down",preset:"secondary",class:"w-full"},{default:n(()=>[m(f(o.itemKey.name),1)]),_:2},1032,["onClick","icon"])]),expandableRow:n(({rowData:o})=>[d("div",A,[d("div",{innerHTML:o.description},null,8,E)])]),"cell(actions)":n(({rowData:o})=>[c(g,{onClick:s=>h.setLearn(o.id)},{default:n(()=>[G]),_:2},1032,["onClick"])]),"cell(favorite)":n(({rowData:o})=>[c(F,{modelValue:o.isFavorite,"onUpdate:modelValue":s=>o.isFavorite=s,onClick:s=>h.setFavorite(o.id,o.isFavorite)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:1},8,["items","columns","filter","filter-method"]),c(x,{class:"!mt-6",color:"info",outline:""},{default:n(()=>[H,c(C,null,{default:n(()=>[m(f(i.filteredCount),1)]),_:1})]),_:1})]),_:1})]),_:1})}var q=w(B,[["render",K]]);export{q as default};
