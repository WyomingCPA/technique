import{_ as V,a as l,r,o as p,i as M,w as d,e as a,b as m,c as v,j as B,t as h,F as R,f}from"./index.7aabad61.js";import{d as w}from"./debounce.7edbbe2b.js";import{q as O}from"./index.5149a7bf.js";const U={name:"ProductAll",components:{},data(){const e=[],t="",s=[{key:"price",sortable:!0},{key:"name",sortable:!0},{key:"count_learn",sortable:!0,width:20},{key:"actions",width:80},{key:"isFavorite",width:50,sortable:!0}],n=[{text:"asc",value:"asc"},{text:"desc",value:"desc"},{text:"no sorting",value:null}];return{valueRange:[5e3,8e4],min:5e3,max:1e5,value:!0,items:e,columns:s,input:t,filter:t,isDebounceInput:!1,isCustomFilteringFn:!1,filteredCount:e.length,listPrice:Array,sortBy:"isFavorite",sortingOrder:"desc",sortingOrderOptions:n,serverParams:{priceMin:"",priceMax:""}}},methods:{updateParams(e){this.serverParams=Object.assign({},this.serverParams,e)},sliderChange(){console.log(this.valueRange),this.updateParams({priceMin:this.valueRange[0],priceMax:this.valueRange[1]}),this.getProduct()},processTrackLabel(e,t){return t===0?`min ${e} \u0440\u0443\u0431`:`max ${e} \u0440\u0443\u0431`},filterExact(e){var t;return this.filter===""?!0:((t=e==null?void 0:e.toString)==null?void 0:t.call(e))===this.filter},updateFilter(e){this.filter=e},debouncedUpdateFilter:w(function(e){this.updateFilter(e)},600),filterPrice:function(e){this.filter=e,this.input=e},setLearn(e){this.loading=!0,this.idProduct=e,console.log(e);let t=this;l.get("/sanctum/csrf-cookie").then(s=>{l.post("/api/product/set-learn",{id_product:t.idProduct}).then(n=>{n.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.getProduct(),this.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(n.status),this.loading=!1)}).catch(function(n){console.log(s),console.error(n),this.loading=!1})})},setFavorite(e,t){this.loading=!0,this.idProduct=e,this.isFavor=t,console.log(e);let s=this;l.get("/sanctum/csrf-cookie").then(n=>{l.post("/api/product/set-favorite",{id_product:s.idProduct,is_favorite:s.isFavor}).then(o=>{o.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.getProduct(),this.loading=!1):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(o.status),this.loading=!1)}).catch(function(o){console.log(n),console.error(o),this.loading=!1})})},getProduct(){let e=this;l.get("/sanctum/csrf-cookie").then(t=>{l.request({method:"post",url:"/api/product/washmashine",params:e.serverParams,paramsSerializer:s=>O.stringify(s)}).then(s=>{e.items=s.data.products,e.listPrice=s.data.price;let n=[];Object.keys(e.listPrice).forEach(function(o,c,g){console.log(o),n.push(parseInt(o))}),e.min=Math.min(...n),e.max=Math.max(...n),console.log(e.valueRange)}).catch(s=>{console.error(s)})})},resetInfoModal(){this.infoModal.title="",this.infoModal.content=""},async handleSubmit(){let e=this;l.get("/sanctum/csrf-cookie").then(t=>{l.post("/api/group/set-subscriber",{count_subscriber:this.countSubscriber,id_group:e.idGroup}).then(s=>{s.status?(console.log("\u0412\u044B\u0437\u0432\u0430\u043B\u0438 \u0430\u043B\u0435\u0440\u0442"),this.getGroups(),this.$refs["my-modal"].hide()):(console.log("\u041D\u0435 \u0440\u0430\u0431\u043E\u0442\u0430\u0435\u0442"),console.log(s.status))}).catch(function(s){console.log(t),console.error(s)})})},sortByOptions(){return this.columns.map(({name:e,key:t,sortable:s})=>s&&(e||t)).filter(Boolean)}},computed:{customFilteringFn(){return this.isCustomFilteringFn?this.filterExact:void 0}},watch:{input(e){this.isDebounceInput?this.debouncedUpdateFilter(e):this.updateFilter(e)}},mounted:function(){this.updateParams({priceMin:this.valueRange[0],priceMax:this.valueRange[1]}),this.getProduct()}},S={class:"grid md:grid-cols-2 gap-6 mb-6"},L={class:"flex flex-wrap gap-6 mb-6"},E=["onClick"],I={class:"flex flex-wrap gap-6 mb-6"},N=f("\u041F\u043E\u0432\u0442\u043E\u0440\u0438\u043B"),j=f(" Number of filtered items: ");function q(e,t,s,n,o,c){const g=r("va-input"),_=r("VaSlider"),b=r("va-button"),F=r("va-switch"),k=r("va-data-table"),P=r("va-chip"),x=r("va-alert"),y=r("va-card-content"),C=r("va-card");return p(),M(C,null,{default:d(()=>[a(y,null,{default:d(()=>[m("div",S,[a(g,{modelValue:o.input,"onUpdate:modelValue":t[0]||(t[0]=i=>o.input=i),placeholder:"Filter...",class:"w-full"},null,8,["modelValue"])]),m("div",L,[(p(!0),v(R,null,B(o.listPrice,(i,u)=>(p(),v("span",{key:u},[m("a",{href:"#",onClick:T=>c.filterPrice(u)},h(u)+"("+h(i)+") ",9,E)]))),128))]),m("div",I,[a(_,{onChange:t[1]||(t[1]=i=>c.sliderChange()),modelValue:o.valueRange,"onUpdate:modelValue":t[2]||(t[2]=i=>o.valueRange=i),step:1e3,min:5e3,max:1e5,class:"mb-6",range:"","track-label-visible":"","track-label":c.processTrackLabel},null,8,["modelValue","track-label"])]),a(k,{items:o.items,columns:o.columns,filter:o.filter,"filter-method":c.customFilteringFn,"sort-by":o.sortBy,"onUpdate:sort-by":t[3]||(t[3]=i=>o.sortBy=i),"sorting-order":o.sortingOrder,"onUpdate:sorting-order":t[4]||(t[4]=i=>o.sortingOrder=i),onFiltered:t[5]||(t[5]=i=>o.filteredCount=i.items.length)},{"cell(actions)":d(({rowData:i})=>[a(b,{onClick:u=>c.setLearn(i.id)},{default:d(()=>[N]),_:2},1032,["onClick"])]),"cell(isFavorite)":d(({rowData:i})=>[a(F,{modelValue:i.isFavorite,"onUpdate:modelValue":u=>i.isFavorite=u,onClick:u=>c.setFavorite(i.id,i.isFavorite)},null,8,["modelValue","onUpdate:modelValue","onClick"])]),_:1},8,["items","columns","filter","filter-method","sort-by","sorting-order"]),a(x,{class:"!mt-6",color:"info",outline:""},{default:d(()=>[j,a(P,null,{default:d(()=>[f(h(o.filteredCount),1)]),_:1})]),_:1})]),_:1})]),_:1})}var W=V(U,[["render",q]]);export{W as default};
