(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9aef05ae"],{"0a65":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"tables"},[t._m(0),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-12 grid-margin stretch-card"},[n("div",{staticClass:"card"},[n("div",{staticClass:"card-body"},[n("h4",{staticClass:"card-title"}),n("b-table",{attrs:{responsive:"",busy:t.loading,items:t.items,fields:t.fields,"sort-by":t.sortBy,"sort-desc":t.sortDesc,filter:t.filter,"filter-included-fields":t.filterOn,"show-empty":"",small:""},on:{"update:sortBy":function(e){t.sortBy=e},"update:sort-by":function(e){t.sortBy=e},"update:sortDesc":function(e){t.sortDesc=e},"update:sort-desc":function(e){t.sortDesc=e}},scopedSlots:t._u([{key:"table-busy",fn:function(){return[n("div",{staticClass:"text-center text-danger my-2"},[n("b-spinner",{staticClass:"align-middle"}),n("strong",[t._v("Loading...")])],1)]},proxy:!0},{key:"cell(limit)",fn:function(e){return[null==e.item.limit?n("span",[t._v("No")]):n("span",[t._v(t._s(e.item.limit.count))])]}},{key:"cell(count_access_product)",fn:function(e){return[null==e.item.limit?n("span",[t._v(t._s(e.item.count_access_product))]):n("span",{class:{"badge badge-success":e.item.count_access_product>=e.item.limit.count,"badge badge-danger":e.item.count_access_product<e.item.limit.count}},[t._v(t._s(e.item.count_access_product))])]}},{key:"cell(actions)",fn:function(e){return[n("b-button",{staticClass:"mr-1",attrs:{size:"sm"},on:{click:function(n){return t.setBalance(e.item,e.index,n.target)}}},[t._v(" Задать лимит ")])]}}])}),n("b-modal",{ref:"my-modal",attrs:{id:t.infoModal.id,title:t.infoModal.title},on:{hide:t.resetInfoModal,ok:t.handleOk}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{label:"Задать лимит","label-for":"name-input","invalid-feedback":"Name is required"}},[n("b-form-input",{attrs:{id:"name-input",required:""},model:{value:t.countLimit,callback:function(e){t.countLimit=e},expression:"countLimit"}})],1)],1)])],1)])])])])},a=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-header"},[n("h3",{staticClass:"page-title"},[t._v("Продукты")]),n("nav",{attrs:{"aria-label":"breadcrumb"}},[n("ol",{staticClass:"breadcrumb"},[n("li",{staticClass:"breadcrumb-item"},[n("a",{attrs:{href:"javascript:void(0);"}},[t._v("Table")])]),n("li",{staticClass:"breadcrumb-item active",attrs:{"aria-current":"page"}},[t._v("Все группы")])])])])}],o=(n("4de4"),n("c975"),n("b0c0"),n("d3b7"),n("96cf"),n("bc3a")),r=n.n(o),s={name:"product-all",components:{},data:function(){return{filter:null,countLimit:0,idCheck:"",filterOn:[],listPrice:Array,loading:!1,sortBy:"count_learn",sortDesc:!1,countSubscriber:0,idGroup:"",idProduct:"",items:Array,infoModal:{id:"info-modal",title:"",content:""},fields:[{key:"id",label:"id",sortable:!0},{key:"name",label:"Название",sortable:!0},{key:"count_access_product",label:"Кол-во доступного товара",sortable:!0},{key:"limit",label:"Кол-во минимального товара",sortable:!0},{key:"created_at",label:"Дата создания",sortable:!0},{key:"actions",label:"Actions"}]}},methods:{filterPrice:function(t){this.filter=t},handleOk:function(t){t.preventDefault(),this.handleSubmit()},setBalance:function(t,e,n){this.infoModal.title=t.name,this.idCheck=t.id,this.$root.$emit("bv::show::modal",this.infoModal.id,n)},getCategory:function(){var t=this;r.a.get("/api/category/index").then((function(e){t.items=e.data.category})).catch((function(t){console.error(t)}))},handleSubmit:function(){var t,e=this;return regeneratorRuntime.async((function(n){while(1)switch(n.prev=n.next){case 0:t=this,r.a.get("/sanctum/csrf-cookie").then((function(n){r.a.post("/api/category/set-limit",{set_limit:e.countLimit,id_check:t.idCheck}).then((function(t){t.status?(console.log("Вызвали алерт"),e.getCategory(),e.$refs["my-modal"].hide()):(console.log("Не работает"),console.log(t.status))})).catch((function(t){console.log(n),console.error(t)}))}));case 2:case"end":return n.stop()}}),null,this)},resetInfoModal:function(){this.infoModal.title="",this.infoModal.content=""},myFilter:function(t){if(-1===arr.indexOf(t.name))return arr.push(t.name),t.name}},mounted:function(){this.getCategory()},computed:{}},c=s,l=n("2877"),u=Object(l["a"])(c,i,a,!1,null,null,null);e["default"]=u.exports},"1dde":function(t,e,n){var i=n("d039"),a=n("b622"),o=n("60ae"),r=a("species");t.exports=function(t){return o>=51||!i((function(){var e=[],n=e.constructor={};return n[r]=function(){return{foo:1}},1!==e[t](Boolean).foo}))}},"4de4":function(t,e,n){"use strict";var i=n("23e7"),a=n("b727").filter,o=n("d039"),r=n("1dde"),s=r("filter"),c=s&&!o((function(){[].filter.call({length:-1,0:1},(function(t){throw t}))}));i({target:"Array",proto:!0,forced:!s||!c},{filter:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},b0c0:function(t,e,n){var i=n("83ab"),a=n("9bf2").f,o=Function.prototype,r=o.toString,s=/^\s*function ([^ (]*)/,c="name";!i||c in o||a(o,c,{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(t){return""}}})}}]);
//# sourceMappingURL=chunk-9aef05ae.093c5627.js.map